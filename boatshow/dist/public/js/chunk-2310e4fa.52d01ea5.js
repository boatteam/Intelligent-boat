(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2310e4fa"],{"2af1":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{attrs:{id:"chart"}})])}],c={data:function(){return{}},components:{},computed:{line_data:function(){var t=this.$store.state.line_data.map(function(t){return t.boat_id}),e=t.indexOf("".concat(this.$store.state.selected_boat.id));return-1!=e?this.$store.state.line_data[e]:[]},watcher:function(){return JSON.stringify(this.$store.state.line_data)}},watch:{watcher:function(t,e){this.initChart()}},mounted:function(){this.initChart()},methods:{initChart:function(){var t=this,e=this.$echarts.init(document.getElementById("chart"));e.setOption({title:{text:"当前时间段监测pH值"},xAxis:{type:"category",data:t.line_data.dateTime},yAxis:{type:"value"},tooltip:{trigger:"axis"},series:[{data:t.line_data.pH,type:"line"}]})}}},s=c,a=(i("937e"),i("2877")),r=Object(a["a"])(s,n,o,!1,null,"1e85b45e",null);e["a"]=r.exports},"6b6b":function(t,e,i){"use strict";(function(t){i("7f7f");var n=i("cb77"),o=i("2af1");e["a"]={data:function(){return{switch_value:!1,websock:null}},created:function(){this.initWebSocket()},beforeDestroy:function(){this.websocketclose()},components:{pathdraw:n["a"],linechart:o["a"]},computed:{boat:function(){return this.$store.state.selected_boat}},mounted:function(){},methods:{initWebSocket:function(){var t="ws://127.0.0.1:8001";this.websock=new WebSocket(t),this.$store.commit("setWebSocket",this.websock),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){this.createWatcher(),console.log("WebSocket连接成功")},websocketonerror:function(){console.log("WebSocket连接失败，正在重连"),this.initWebSocket()},websocketonmessage:function(t){var e=JSON.parse(t.data),i=e.name;"direction"==i?console.log("接收服务器数据:".concat(e.direction)):"cancel"==i?console.log("接收服务器数据:cancel ".concat(e.direction)):"boat_data"==i?(console.log("接收服务器数据,坐标为:".concat(e.points)),this.$store.commit("setPoints",e.points)):"line_data"==i&&(console.log("接收服务器数据,时间:".concat(e.dateTime,"数据:").concat(e.pH)),this.$store.commit("setLineData",e))},websocketsend:function(t){console.log("向服务器发送数据:".concat(t)),this.websock.send(t)},websocketclose:function(t){this.websock.close(),console.log("WebSocket连接断开",t)},createWatcher:function(){var e=!0,i=!0,n=!0,o=!0,c=this;t(window).keydown(function(t){if(37==t.keyCode&&e){var s={name:"direction",direction:"left"};c.websocketsend(JSON.stringify(s)),e=!1}if(39==t.keyCode&&i){var a={name:"direction",direction:"right"};c.websocketsend(JSON.stringify(a)),i=!1}if(38==t.keyCode&&n){var r={name:"direction",direction:"up"};c.websocketsend(JSON.stringify(r)),n=!1}if(40==t.keyCode&&o){var d={name:"direction",direction:"down"};c.websocketsend(JSON.stringify(d)),o=!1}if(49==t.keyCode){var l={name:"boat_data",points:[{boat_id:"1",coords:[[120.030551,30.223874]]}]},f=JSON.stringify(l);c.websocketsend(f)}if(52==t.keyCode){l={name:"boat_data",points:[{boat_id:"1",coords:[[120.030251,30.224074]]}]};var u=JSON.stringify(l);c.websocketsend(u)}if(51==t.keyCode){l={name:"boat_data",points:[{boat_id:"1",coords:[[120.030551,30.224074]]}]};var b=JSON.stringify(l);c.websocketsend(b)}if(50==t.keyCode){l={name:"boat_data",points:[{boat_id:"1",coords:[[120.030551,30.223974]]}]};var h=JSON.stringify(l);c.websocketsend(h)}if(16==t.keyCode){l={name:"line_data",boat_id:"1",dateTime:"2019-06-22 08:00:13",pH:"7.33"};var w=JSON.stringify(l);c.websocketsend(w)}}),t(window).keyup(function(t){if(37==t.keyCode&&!e){var s={name:"cancel",direction:"left"};c.websocketsend(JSON.stringify(s)),e=!0}if(39==t.keyCode&&!i){var a={name:"cancel",direction:"right"};c.websocketsend(JSON.stringify(a)),i=!0}if(38==t.keyCode&&!n){var r={name:"cancel",direction:"up"};c.websocketsend(JSON.stringify(r)),n=!0}if(40==t.keyCode&&!o){var d={name:"cancel",direction:"down"};c.websocketsend(JSON.stringify(d)),o=!0}})}}}}).call(this,i("1157"))},"6c3a":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contentbox"},[i("div",{staticClass:"content"},[i("div",{staticClass:"video"}),i("div",{staticClass:"path_draw"},[i("div",{staticClass:"remind"},[i("p",[t._v("温馨提示：使用方向键控制小船移动")]),i("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#13ce66","active-text":"数据图","inactive-text":"路径图"},model:{value:t.switch_value,callback:function(e){t.switch_value=e},expression:"switch_value"}})],1),i("div",{staticClass:"switch_box"},[t.switch_value?i("linechart"):i("pathdraw")],1)])])])},o=[],c=i("6b6b"),s=c["a"],a=(i("f37a"),i("2877")),r=Object(a["a"])(s,n,o,!1,null,"6ddc62e0",null);e["default"]=r.exports},"7f7f":function(t,e,i){var n=i("86cc").f,o=Function.prototype,c=/^\s*function ([^ (]*)/,s="name";s in o||i("9e1e")&&n(o,s,{configurable:!0,get:function(){try{return(""+this).match(c)[1]}catch(t){return""}}})},"937e":function(t,e,i){"use strict";var n=i("e00e"),o=i.n(n);o.a},e00e:function(t,e,i){},f37a:function(t,e,i){"use strict";var n=i("f6a5"),o=i.n(n);o.a},f6a5:function(t,e,i){}}]);
//# sourceMappingURL=chunk-2310e4fa.52d01ea5.js.map